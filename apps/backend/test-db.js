const mariadb = require('mariadb');
async function test() {
    try {
        console.log('üß™ TESTING DIRECT CONNECTION...');
        const pool = mariadb.createPool({
            host: 'mariadb',
            port: 3306,
            user: 'root',
            password: 'DbPass1@@',
            connectionLimit: 50,
            acquireTimeout: 10000
        });

        const conn = await pool.getConnection();
        console.log('‚úÖ DIRECT CONNECTION SUCCESS!');
        console.log('üìä POOL INFO:', {
            active: pool._allConnections?.length || 0,
            idle: pool._freeConnections?.length || 0
        });

        await conn.query('SELECT 1');
        console.log('‚úÖ QUERY SUCCESS!');

        conn.release();
        await pool.end();
    } catch (err) {
        console.error('‚ùå DIRECT TEST FAILED:', err.message);
    }
}
test();